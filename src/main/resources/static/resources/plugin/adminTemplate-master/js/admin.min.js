(function(b,e){var d={managerUrl:"javascript:void(0)",managerName:"管理员",sayHello:"Hi",hasLogout:true,logoutUrl:"javascript:void(0)",logoutText:"Logout",hasSearch:true,searchPlaceHolder:"Looking for something?",searchAction:"javascript:void(0)",searchCallback:null,searchName:"keyword",menu:null,menuDefaultImg:"img/icons/menu/layout.png",menuHandler:function(f,i,h,g){h.text(i);g.text(f)}};var a;window.adminTemplate={init:function(f){a=b.extend({},d,f);this.generateHead();this.generateMenu();this.generateContent();c()},getSearchKey:function(){if(a.hasSearch){return b("#aT_search").val()}},generateMenu:function(){if(a.menu!=null){var n=a.menu;var m='<div id="at-sidebar"><ul>';for(var l=0;l<n.length;l++){var f="<li"+(l==0?(' class="current"'):(""))+'><a href="javascript:void(0)"'+(n[l].subMenu?(""):(' key="'+n[l].key+'" class="aT_getEvent"'))+">";f+='<img src="'+(n[l].img?(n[l].img):(a.menuDefaultImg))+'" />';f+=n[l].name+"</a>";if(n[l].subMenu){f+="<ul>";var g=n[l].subMenu;for(var h=0;h<g.length;h++){var k="<li"+((h==0&&l==0)?(' class="current"'):(""))+'><a href="javascript:void(0)" key="'+g[h].key+'" class="aT_getEvent">';k+=g[h].name+"</a></li>";f+=k}f+="</ul>"}f+="</li>";m+=f}m+="</ul></div>";document.write(m)}},generateHead:function(){var f='<div id="at-head"><div class="left">';f+='<a href="javascript:void(0)" class="button profile"><img src="'+a.managerIcon+'" alt="" /></a>';f+=a.sayHello+", "+'<a href="'+a.managerUrl+'">'+a.managerName+"</a>";if(a.hasLogout==true){f+='&nbsp;|&nbsp;<a href="'+a.logoutUrl+'">'+a.logoutText+"</a>"}f+="</div>";if(a.hasSearch==true){f+='        <div class="right">'+'                <form action="'+(a.searchCallback==null?a.searchAction:d.searchAction)+'" class="search placeholder">'+'                    <input type="text" value="" id="aT_search" name="'+a.searchName+'" class="text" placeholder="'+a.searchPlaceHolder+'"/>'+'                    <input type="submit" value="rechercher" id="aT_search_button" class="submit"/>'+"                </form>"+"        		 </div>"}f+="</div>";document.write(f)},generateContent:function(){var f="内容标题";var g='<div id="at-content" class="white">'+'        <div class="bloc">'+'	    <div class="title">'+f+"	    </div>"+'	    <div class="content"></div>'+"        </div>"+"</div>";document.write(g)},getContent:function(g){var f=b("#at-content .content");if(g){return f[0]}return f},getContentTitle:function(g){var f=b("#at-content .title");if(g){return f[0]}return f}};function c(){var h=window.adminTemplate;var g=null;b("#at-sidebar>ul>li").each(function(){if(b(this).find("li").length==0){b(this).addClass("nosubmenu")}});b('#at-sidebar>ul>li[class!="nosubmenu"]>a').each(function(){if(!b(this).parent().hasClass("current")){b(this).parent().find("ul:first").hide()}else{g=b(this)}b(this).click(function(){b("#at-sidebar>ul>li.current").removeClass("current");if(g!=null&&g.text()!=b(this).text()){g.parent().find("ul:first").slideUp()}if(g!=null&&g.text()==b(this).text()){g.parent().find("ul:first").slideUp();g=null}else{g=b(this);g.parent().addClass("current");g.parent().find("ul:first").slideDown()}return false})});b(".aT_getEvent").click(function(){var j=b(this);b(".current").removeClass("current");j.parent().addClass("current");a.menuHandler(j.attr("key"),j.text(),h.getContentTitle(),h.getContent())});var i=b(".current");var f=i.find(".current");if(f.length==0){i.find("a").click()}else{f.find("a").click()}b("#aT_search_button").click(function(){if(a.searchCallback!=null&&a.searchCallback instanceof Function){a.searchCallback(h.getSearchKey())}})}})(jQuery);
